pgdb_s2_workdir: "{{ app_base_dir }}/pgdb_s2"
ansible_python_interpreter: "/usr/bin/python3"

# Domain
pgdb_s2_master_domain: master.pgdb-s2-postgres.service.consul
pgdb_s2_replica_domain: replica.pgdb-s2-postgres.service.consul

# Consul configs
pgdb_s2_consul_image: consul:1.14.4
pgdb_s2_consul_workdir: "{{ pgdb_s2_workdir }}/consul"
pgdb_s2_consul_domain: "consul"

# Postgres-patroni configs
pgdb_s2_postgres_workdir: "{{ pgdb_s2_workdir }}/postgres"
pgdb_s2_postgres_datadir: "{{ pgdb_s2_postgres_workdir }}/postgres-data"
pgdb_s2_postgres_datadir_container: "{{ pgdb_s2_postgres_workdir }}/postgres-data/"
pgdb_s2_postgres_image: patroni-v2.1.4-postgres-consul:13.6
pgdb_s2_postgres_port: 8432 
pgdb_s2_postgres_dbname: "postgres"
pgdb_s2_postgres_users: 
  superuser:
    username: "postgres"
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      63646137366330303765343133643230616137376136626364616263623935636537373363333730
      3534383731313366613734313966303730656333303033340a333862343539303333363038643861
      31383634313762373365653134346137653232646333333732313531356231356362303739643237
      3066373163386339650a303539353837636266663532326132333164643162323636613534373337
      63303261643466316237613862383464313930303230613833323263646265646365
  replication:
    username: "replicator"
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      30313632616464333963633236323538326662396231373761383131616433353063383734366137
      3361303132363934356233363230306137663339326235660a666564386438636666393763343533
      38393461306266626336653464336438663836363265393732663238326336663930373938343935
      3830343732313661650a336237396266653232336432393037613339376635393339653334313163
      36336434656631616530376561303231623139386266373539393961616235343063
  rewind:
    username: "rewind_user"
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      62396133356635623332346238623137383639356433636261323261383932643031643632303666
      3334313633386265313266366433636264323866363034650a623037396663373331383565336262
      32373163633837393932363231346539386532306561633234613430356264303766336530656434
      6436666330663739340a303238656562313264623464363430366264303438326533656365396539
      66653366663231313031363837316665386135316563616130633766353338653563
pgdb_s2_postgres_network: 10.60.31.0/24
pgdb_s2_postgres_scope: pgdb_s2-postgres
pgdb_s2_postgres_patroni_restapi_port: 8000

# Bootstrap configs
pgdb_s2_bootstrap: True
pgdb_s2_bootstrap_users:
  - name: "backend"
    flags: "SUPERUSER"
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35643564356638336261373337653037356262646533626231376562666430303533633630373439
      3930333161636133356139303564643236613135353136380a383062303939316565613130383138
      36383230636432313930643231306363643365373665656535616661653861613134356334306331
      6466383266303431310a663666316638643438326632306564346165633432656336653831323462
      3262
pgdb_s2_bootstrap_databases:
  - name: "backend"
    owner: "backend"

# PGBouncer configs
pgdb_s2_pgbouncer_rw_workdir: "{{ pgdb_s2_workdir }}/pgbouncer-rw"
pgdb_s2_pgbouncer_ro_workdir: "{{ pgdb_s2_workdir }}/pgbouncer-ro"
pgdb_s2_pgbouncer_image: brainsam/pgbouncer:latest
pgdb_s2_pgbouncer_pool_mode: "transaction"
pgdb_s2_pgbouncer_max_client_conn: 1000
pgdb_s2_pgbouncer_port: 6432
pgdb_s2_pgbouncer_rw_port: 5432
pgdb_s2_pgbouncer_ro_port: 5433
pgdb_s2_pgbouncer_listen_addr: "0.0.0.0"
pgdb_s2_pgbouncer_auth_type: "md5"
pgdb_s2_pgbouncer_auth_file: "/pgbouncer/users.txt"
pgdb_s2_pgbouncer_admin_users: "postgres"
pgdb_s2_pgbouncer_default_pool_size: 30
pgdb_s2_pgbouncer_pools:
  - name: "postgres"
    dbname: "postgres"
    password_md5: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      36353166646432653335613732656361323932363032636364636535313739623365666434356539
      6566636538653763373638316237633136613062633562360a303363316261353738343930376131
      61616333366136346262366232613064656662653030333033646534363661643066313338623364
      3630313037373137660a323437613938643732303466323964373865363034666635623364343930
      32646236633334396439393639663066643731663134316466316234346363643864656638633761
      3238636238663135313833343534663333663839323665356637
  - name: "backend"
    dbname: "backend"
    password_md5: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      31626665626236366231313031613437366336393462373334656361326433376265633334393330
      3865326533626162346563666561343261313630353539310a393239343234386162393131396632
      63363030366264666563653235643730353434383738646634353734323164626362313561386431
      6165346264396537370a653466653433383164633537393339656663363035353035306666396534
      63323630326337343631353763623361306638613066383665623966623135373433343433666433
      6232643862356335313938623261346532633465656334626162
